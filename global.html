<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Global - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#autoCreateNewEditionGroup">autoCreateNewEditionGroup</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#castDiscardVote">castDiscardVote</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createEditionGroupForNewEdition">createEditionGroupForNewEdition</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createImportDataRecord">createImportDataRecord</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#deleteOauthToken">deleteOauthToken</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#formatDate">formatDate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getAddedItems">getAddedItems</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getAdditionalEntityProps">getAdditionalEntityProps</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEditionGroupsCreditedToAuthor">getEditionGroupsCreditedToAuthor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEditionsCreditedToAuthor">getEditionsCreditedToAuthor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEntity">getEntity</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEntityModelByType">getEntityModelByType</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEntityModels">getEntityModels</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getEntityParentAlias">getEntityParentAlias</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getOauthToken">getOauthToken</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getRecentImportUtilData">getRecentImportUtilData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getRemovedItems">getRemovedItems</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getUnchangedItems">getUnchangedItems</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#isNullDate">isNullDate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ISODateStringToObject">ISODateStringToObject</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#loadAuthorNames">loadAuthorNames</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#parseDate">parseDate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#promiseProps">promiseProps</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#recursivelyGetAreaParentsWithNames">recursivelyGetAreaParentsWithNames</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#recursivelyGetRedirectBBID">recursivelyGetRedirectBBID</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#saveOauthToken">saveOauthToken</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateAnnotation">updateAnnotation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateDisambiguation">updateDisambiguation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateOauthToken">updateOauthToken</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#updateRelationshipSets">updateRelationshipSets</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">Global</h1>
    

    




<section>

<header>
    
        <h2>
        
        </h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            
<div class="section-method">

    

    <h4 class="name" id="autoCreateNewEditionGroup"><span class="type-signature">(async) </span>autoCreateNewEditionGroup<span class="signature">(model, bookshelf, options)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Automatically create and sets a new Edition Group
if there is none selected, in the same transaction
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="models_entities_edition.js.html">models/entities/edition.js</a>, <a href="models_entities_edition.js.html#line36">line 36</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>model</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>any</code></span>


            
            </td>

            

            

            <td class="description last">
                The ORM model of the Edition being edited/created
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>bookshelf</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Bookshelf</code></span>


            
            </td>

            

            

            <td class="description last">
                The BookshelfJS ORM
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>any</code></span>


            
            </td>

            

            

            <td class="description last">
                Query options such as transacting object
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="castDiscardVote"><span class="type-signature">(async) </span>castDiscardVote<span class="signature">(transacting, importBbid, editorId)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>

    



<div class="description">
    This function casts a discard vote. In case of it has already been cast,
it raises an error. If the vote is decisive one (and the record is deleted),
it returns a Promise that resolves to true, else it returns an promise that
resolves to false.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_imports_discard.js.html">func/imports/discard.js</a>, <a href="func_imports_discard.js.html#line47">line 47</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>transacting</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Transaction</code></span>


            
            </td>

            

            

            <td class="description last">
                The knex Transacting object
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>importBbid</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                BBID of the import
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>editorId</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                Id of the user casting the vote
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;boolean></code></span>


    </dd>
</dl>


<div class="param-desc">
    - Promise<true> if records has been deleted or
		Promise<false> if the record is still present
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="createEditionGroupForNewEdition"><span class="type-signature">(async) </span>createEditionGroupForNewEdition<span class="signature">(orm, transacting, aliasSetId, revisionId, authorCreditId, creditSection)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    Create a new Edition Group for an Edition.
The Edition Group will be part of the same revision, and will have the same
alias set and author credit for that revision
Subsequent changes to the alias set or author credit for either entity will
only impact that entity's new revision.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="util.js.html">util.js</a>, <a href="util.js.html#line224">line 224</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Bookshelf</code></span>


            
            </td>

            

            

            <td class="description last">
                The Bookshelf ORM
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>transacting</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Transaction</code></span>


            
            </td>

            

            

            <td class="description last">
                The Bookshelf/Knex SQL transaction in progress
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>aliasSetId</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>
|

<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The id of the new edition's alias set
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>revisionId</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>
|

<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The id of the new edition's revision
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>authorCreditId</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>
|

<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The id of the new edition's author credit
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>creditSection</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            

            

            <td class="description last">
                The state of author credit section of the new edition
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>string</code></span>


    </dd>
</dl>


<div class="param-desc">
    BBID of the newly created Edition Group
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="createImportDataRecord"><span class="type-signature"></span>createImportDataRecord<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    IDs of all data sets which an entity can have.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_imports_create-import.js.html">func/imports/create-import.js</a>, <a href="func_imports_create-import.js.html#line57">line 57</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="deleteOauthToken"><span class="type-signature">(async) </span>deleteOauthToken<span class="signature">(editorId, service, orm)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Deletes the Oauth token with related data from the database
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_externalServiceOauth.js.html">func/externalServiceOauth.js</a>, <a href="func_externalServiceOauth.js.html#line58">line 58</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>editorId</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                Editor's id.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>service</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                name of the service.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                the BookBrainz ORM, initialized during app setup
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="formatDate"><span class="type-signature"></span>formatDate<span class="signature">(year, month<span class="signature-attributes">opt</span>, day<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    Produce an ISO 8601-2004 formatted string for a date.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="util.js.html">util.js</a>, <a href="util.js.html#line158">line 158</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>year</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                A calendar year.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>month</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                A calendar month.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>day</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                A calendar day of month.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>string</code></span>


    </dd>
</dl>


<div class="param-desc">
    The provided date formatted as an ISO 8601-2004 year or calendar date.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="getAddedItems"><span class="type-signature"></span>getAddedItems<span class="signature">(oldSet, newSet, comparisonFunc)</span><span class="type-signature"> &rarr; {Array.&lt;Item>}</span></h4>

    



<div class="description">
    Get any items in the new version of the set that aren't present in the old
version using a custom comparison function. The two arrays represent two
versions of a single set - one array is the set before a particular change
and the other is the same set after that change.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_set.js.html">func/set.js</a>, <a href="func_set.js.html#line70">line 70</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>oldSet</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Array.&lt;Item></code></span>


            
            </td>

            

            

            <td class="description last">
                The old array to compare
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>newSet</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Array.&lt;Item></code></span>


            
            </td>

            

            

            <td class="description last">
                The new array to compare
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>comparisonFunc</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>function</code></span>


            
            </td>

            

            

            <td class="description last">
                Function to compare items from the two
arrays
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Array.&lt;Item></code></span>


    </dd>
</dl>


<div class="param-desc">
    - An array representing the difference of the two
arrays
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="getAdditionalEntityProps"><span class="type-signature"></span>getAdditionalEntityProps<span class="signature">(entityData, entityType)</span><span class="type-signature"> &rarr; {Object}</span></h4>

    







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_entity.js.html">func/entity.js</a>, <a href="func_entity.js.html#line43">line 43</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>entityData</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                Object holding all data related to an entity
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>entityType</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The type of the entity
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Object</code></span>


    </dd>
</dl>


<div class="param-desc">
    - Returns all the additional entity specific data
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="getEditionGroupsCreditedToAuthor"><span class="type-signature">(async) </span>getEditionGroupsCreditedToAuthor<span class="signature">(bookshelf, authorBBID)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Fetches all the Edition Group entities credited to an Author (with Author Credits)
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_author-credit.js.html">func/author-credit.js</a>, <a href="func_author-credit.js.html#line142">line 142</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>bookshelf</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Bookshelf</code></span>


            
            </td>

            

            

            <td class="description last">
                the Bookshelf instance, initialized during app setup
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>authorBBID</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The target Author's BBID.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise</code></span>


    </dd>
</dl>


<div class="param-desc">
    The returned Promise returns the Edition Group BBID and default alias
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="getEditionsCreditedToAuthor"><span class="type-signature">(async) </span>getEditionsCreditedToAuthor<span class="signature">(bookshelf, authorBBID)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Fetches all the Edition entities credited to an Author (with Author Credits)
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_author-credit.js.html">func/author-credit.js</a>, <a href="func_author-credit.js.html#line111">line 111</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>bookshelf</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Bookshelf</code></span>


            
            </td>

            

            

            <td class="description last">
                the Bookshelf instance, initialized during app setup
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>authorBBID</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The target Author's BBID.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise</code></span>


    </dd>
</dl>


<div class="param-desc">
    The returned Promise returns the Edition BBID and default alias
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="getEntity"><span class="type-signature">(async) </span>getEntity<span class="signature">(orm, entityType, bbid, relations)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Fetches an entity with related data
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_entity.js.html">func/entity.js</a>, <a href="func_entity.js.html#line180">line 180</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                the BookBrainz ORM, initialized during app setup
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>entityType</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The entity model name.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>bbid</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The target entity's bbid.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>relations</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Array.&lt;string></code></span>


            
            </td>

            

            

            <td class="description last">
                Extra model relationships to fetch along with the entity
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise</code></span>


    </dd>
</dl>


<div class="param-desc">
    A Promise that resolves to the entity in JSON format
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="getEntityModelByType"><span class="type-signature"></span>getEntityModelByType<span class="signature">(orm, type)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    Retrieves the Bookshelf entity model with the given the model name
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_entity.js.html">func/entity.js</a>, <a href="func_entity.js.html#line146">line 146</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                the BookBrainz ORM, initialized during app setup
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                Name or type of model
                
            </td>
        </tr>

    
    </tbody>
</table>












<div class="section-throws">
<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        Throws a custom error if the param 'type' does not
map to a model
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type"><code>Error</code></span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    
</div>



<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>object</code></span>


    </dd>
</dl>


<div class="param-desc">
    - Bookshelf model object with the type specified in the
single param
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="getEntityModels"><span class="type-signature"></span>getEntityModels<span class="signature">(orm)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    Returns all entity models defined in bookbrainz-data-js
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_entity.js.html">func/entity.js</a>, <a href="func_entity.js.html#line117">line 117</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                the BookBrainz ORM, initialized during app setup
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>object</code></span>


    </dd>
</dl>


<div class="param-desc">
    - Object mapping model name to the entity model
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="getEntityParentAlias"><span class="type-signature">(async) </span>getEntityParentAlias<span class="signature">(orm, entityType, bbid)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Fetches an entity's last known default alias from its revision parent.
This is necessary to display the name of a 'deleted' entity
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_entity.js.html">func/entity.js</a>, <a href="func_entity.js.html#line203">line 203</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                the BookBrainz ORM, initialized during app setup
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>entityType</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The entity model name.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>bbid</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The target entity's bbid.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise</code></span>


    </dd>
</dl>


<div class="param-desc">
    The returned Promise returns the entity's
					   parent default alias
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="getOauthToken"><span class="type-signature">(async) </span>getOauthToken<span class="signature">(editorId, service, orm)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Fetches the Oauth token with related data
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_externalServiceOauth.js.html">func/externalServiceOauth.js</a>, <a href="func_externalServiceOauth.js.html#line35">line 35</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>editorId</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                Editor's id.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>service</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                Name of the service.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                the BookBrainz ORM, initialized during app setup
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise</code></span>


    </dd>
</dl>


<div class="param-desc">
    A Promise that resolves to the oauth token in JSON format
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="getRecentImportUtilData"><span class="type-signature">(async) </span>getRecentImportUtilData<span class="signature">(transacting, limit, offset)</span><span class="type-signature"> &rarr; {Promise.&lt;Object.&lt;Array>>}</span></h4>

    



<div class="description">
    getRecentImportIdsByType -
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_imports_recent-imports.js.html">func/imports/recent-imports.js</a>, <a href="func_imports_recent-imports.js.html#line44">line 44</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>transacting</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Transaction</code></span>


            
            </td>

            

            

            <td class="description last">
                Transaction object
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>limit</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                To limit the number of importIds fetched
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>offset</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                We offset the result by this value
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Object.&lt;Array>></code></span>


    </dd>
</dl>


<div class="param-desc">
    - Returns an object containing arrays of
		importIds of various importTypes
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="getRemovedItems"><span class="type-signature"></span>getRemovedItems<span class="signature">(oldSet, newSet, comparisonFunc)</span><span class="type-signature"> &rarr; {Array.&lt;Item>}</span></h4>

    



<div class="description">
    Get any items in the old version of the set that aren't present in the new
version using a custom comparison function. The two arrays represent two
versions of a single set - one array is the set before a particular change
and the other is the same set after that change.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_set.js.html">func/set.js</a>, <a href="func_set.js.html#line88">line 88</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>oldSet</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Array.&lt;Item></code></span>


            
            </td>

            

            

            <td class="description last">
                The old array to compare
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>newSet</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Array.&lt;Item></code></span>


            
            </td>

            

            

            <td class="description last">
                The new array to compare
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>comparisonFunc</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>function</code></span>


            
            </td>

            

            

            <td class="description last">
                Function to compare items from the two
arrays
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Array.&lt;Item></code></span>


    </dd>
</dl>


<div class="param-desc">
    - An array representing the difference of the two
arrays
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="getUnchangedItems"><span class="type-signature"></span>getUnchangedItems<span class="signature">(oldSet, newSet, comparisonFunc)</span><span class="type-signature"> &rarr; {Array.&lt;Item>}</span></h4>

    



<div class="description">
    Get the intersection of two arrays of objects using a custom comparison
function. The two arrays represent two versions of a single set - one array
is the set before a particular change and the other is the same set after
that change.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_set.js.html">func/set.js</a>, <a href="func_set.js.html#line52">line 52</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>oldSet</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Array.&lt;Item></code></span>


            
            </td>

            

            

            <td class="description last">
                The old array to compare
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>newSet</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Array.&lt;Item></code></span>


            
            </td>

            

            

            <td class="description last">
                The new array to compare
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>comparisonFunc</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>function</code></span>


            
            </td>

            

            

            <td class="description last">
                Function to compare items from the two
arrays
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Array.&lt;Item></code></span>


    </dd>
</dl>


<div class="param-desc">
    - An array representing the intersection of the two
arrays
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="init"><span class="type-signature"></span>init<span class="signature">(config)</span><span class="type-signature"> &rarr; {Object}</span></h4>

    



<div class="description">
    Initialize the database connection and models.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line120">line 120</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>config</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Knex.Config</code></span>


            
            </td>

            

            

            <td class="description last">
                A knex.js configuration object.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Object</code></span>


    </dd>
</dl>


<div class="param-desc">
    All data models.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="isNullDate"><span class="type-signature"></span>isNullDate<span class="signature">(date)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    Determines wether a given date is empty or null, meaning no year month or day has been specified.
Accepts a {day, month, year} object or an ISO 8601-2004 string (±YYYYYY-MM-DD)
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_date.js.html">func/date.js</a>, <a href="func_date.js.html#line64">line 64</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>date</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>
|

<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                a {day, month, year} object or ISO 8601-2004 string (±YYYYYY-MM-DD)
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>boolean</code></span>


    </dd>
</dl>


<div class="param-desc">
    true if the date is empty/null
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="ISODateStringToObject"><span class="type-signature"></span>ISODateStringToObject<span class="signature">(value)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    Parse an ISO 8601-2004 string and return an object with separate day, month and year, if they exist.
If any of the values don't exist, the default is an empty string.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_date.js.html">func/date.js</a>, <a href="func_date.js.html#line31">line 31</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                relationshipId number for initaial relationship
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>object</code></span>


    </dd>
</dl>


<div class="param-desc">
    a {day, month, year} object
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="loadAuthorNames"><span class="type-signature">(async) </span>loadAuthorNames<span class="signature">(orm, workBBIDs)</span><span class="type-signature"> &rarr; {Object}</span></h4>

    







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_work.js.html">func/work.js</a>, <a href="func_work.js.html#line31">line 31</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>ORM</code></span>


            
            </td>

            

            

            <td class="description last">
                the BookBrainz ORM, initialized during app setup
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>workBBIDs</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>array</code></span>


            
            </td>

            

            

            <td class="description last">
                the array containing the BBIDs of the works contained in the edition
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Object</code></span>


    </dd>
</dl>


<div class="param-desc">
    - Returns an array of objects containing the authorAlias, authorBBID of each work in an edition
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="parseDate"><span class="type-signature"></span>parseDate<span class="signature">(date)</span><span class="type-signature"> &rarr; {Array.&lt;(number|null)>}</span></h4>

    



<div class="description">
    Split ISO 8601 calendar dates or years into a numerical array.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="util.js.html">util.js</a>, <a href="util.js.html#line181">line 181</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>date</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                A date of the format 'YYYY', 'YYYY-MM', or 'YYYY-MM-DD'.
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Array.&lt;(number|null)></code></span>


    </dd>
</dl>


<div class="param-desc">
    - Year, month, and day of month respectively.
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="promiseProps"><span class="type-signature">(async) </span>promiseProps<span class="signature">(promiseObj)</span><span class="type-signature"> &rarr; {Object}</span></h4>

    



<div class="description">
    Replacement for Bluebird's Promise.props
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="util.js.html">util.js</a>, <a href="util.js.html#line253">line 253</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>promiseObj</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                an object containing string keys and promises
                             to be resolved as the values
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Object</code></span>


    </dd>
</dl>


<div class="param-desc">
    an object containing the same keys, but resolved promises
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="recursivelyGetAreaParentsWithNames"><span class="type-signature">(async) </span>recursivelyGetAreaParentsWithNames<span class="signature">(orm, areaId, checkAllLevels)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Recursively fetches an area's parents (with "has part" link)
Adapted from https://github.com/metabrainz/musicbrainz-server/blob/f79b6d0d2d4bd67254cc34426f17cf8eb21ec5bb/lib/MusicBrainz/Server/Data/Utils.pm#L255-L273
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_area.js.html">func/area.js</a>, <a href="func_area.js.html#line16">line 16</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                the BookBrainz ORM, initialized during app setup, or a Bookshelf instance
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>areaId</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">
                The BBID (= MBID) of the area
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>checkAllLevels</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last">
                By default limits to the area types Country, Subdivision and City
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise</code></span>


    </dd>
</dl>


<div class="param-desc">
    The returned Promise returns the entity's
					   parent default alias
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="recursivelyGetRedirectBBID"><span class="type-signature">(async) </span>recursivelyGetRedirectBBID<span class="signature">(orm, bbid, transacting)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    Finds the bbid an entity redirects to, if any.
Do a recursive search in case the redirected bbid also redirects, etc.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_entity.js.html">func/entity.js</a>, <a href="func_entity.js.html#line162">line 162</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                the BookBrainz ORM, initialized during app setup
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>bbid</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The target entity's bbid.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>transacting</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>any</code></span>


            
            </td>

            

            

            <td class="description last">
                Optional ORM transaction object
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>string</code></span>


    </dd>
</dl>


<div class="param-desc">
    The final bbid to redirect to
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="saveOauthToken"><span class="type-signature">(async) </span>saveOauthToken<span class="signature">(editorId, service, accessToken, refreshToken, tokenExpiresTs, scopes, orm)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Saves the Oauth token with related data to the database
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_externalServiceOauth.js.html">func/externalServiceOauth.js</a>, <a href="func_externalServiceOauth.js.html#line82">line 82</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>editorId</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                Editor's id.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>service</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                name of the service.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>accessToken</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                access token.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>refreshToken</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                refresh token.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tokenExpiresTs</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                token expiration timestamp.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>scopes</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Array.&lt;string></code></span>


            
            </td>

            

            

            <td class="description last">
                scopes.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                the BookBrainz ORM, initialized during app setup
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise</code></span>


    </dd>
</dl>


<div class="param-desc">
    A Promise that resolves to the oauth token in JSON format
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="updateAnnotation"><span class="type-signature"></span>updateAnnotation<span class="signature">(orm, transacting, oldAnnotation, newContent, revision)</span><span class="type-signature"> &rarr; {Promise.&lt;Object>}</span></h4>

    







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_annotation.js.html">func/annotation.js</a>, <a href="func_annotation.js.html#line36">line 36</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>ORM</code></span>


            
            </td>

            

            

            <td class="description last">
                Bookbrainz orm wrapper holding all models
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>transacting</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Transaction</code></span>


            
            </td>

            

            

            <td class="description last">
                The present knex transacting object
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>oldAnnotation</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                The old annotation object
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>newContent</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                New annotation to be set
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>revision</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                The present revision object
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Object></code></span>


    </dd>
</dl>


<div class="param-desc">
    - Returns Annotation object
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="updateDisambiguation"><span class="type-signature"></span>updateDisambiguation<span class="signature">(orm, transacting, oldDisambiguation, newComment)</span><span class="type-signature"> &rarr; {Promise.&lt;Object>}</span></h4>

    







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_disambiguation.js.html">func/disambiguation.js</a>, <a href="func_disambiguation.js.html#line35">line 35</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>ORM</code></span>


            
            </td>

            

            

            <td class="description last">
                The BookBrainz orm wrapper containing all models
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>transacting</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Transaction</code></span>


            
            </td>

            

            

            <td class="description last">
                The current knex transaction object
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>oldDisambiguation</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                The previous disambiguation object
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>newComment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                The new disambiguation string
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;Object></code></span>


    </dd>
</dl>


<div class="param-desc">
    - Returns Promise holding Disambiguation object
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="updateOauthToken"><span class="type-signature">(async) </span>updateOauthToken<span class="signature">(editorId, service, accessToken, refreshToken, tokenExpiresTs, orm)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    



<div class="description">
    Updates the Oauth token with related data in the database
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_externalServiceOauth.js.html">func/externalServiceOauth.js</a>, <a href="func_externalServiceOauth.js.html#line122">line 122</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>editorId</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                Editor's id.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>service</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                name of the service.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>accessToken</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                access token.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>refreshToken</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                refresh token.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>tokenExpiresTs</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>number</code></span>


            
            </td>

            

            

            <td class="description last">
                token expiration timestamp.
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                the BookBrainz ORM, initialized during app setup
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise</code></span>


    </dd>
</dl>


<div class="param-desc">
    A Promise that resolves to the oauth token in JSON format
</div>

    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="updateRelationshipSets"><span class="type-signature"></span>updateRelationshipSets<span class="signature">(orm, transacting, oldSet, newSetItems)</span><span class="type-signature"> &rarr; {Promise.&lt;any>}</span></h4>

    



<div class="description">
    Takes an array of relationships that should be set for the entity, and
compares it to the currently set list of relationships to determine the
difference. Compiles a list of affected entity BBIDs from this difference,
and then updates the relationship sets for all affected entities, and returns
these. If no entities are affected (there are no changes), an empty object
is returned.
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="func_relationship.js.html">func/relationship.js</a>, <a href="func_relationship.js.html#line117">line 117</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>orm</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>ORM</code></span>


            
            </td>

            

            

            <td class="description last">
                an initialized instance of bookbrainz-data-js
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>transacting</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Transaction</code></span>


            
            </td>

            

            

            <td class="description last">
                the current transaction
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>oldSet</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>any</code></span>


            
            </td>

            

            

            <td class="description last">
                the RelationshipSet object for the old entity data
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>newSetItems</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Array.&lt;Relationship></code></span>


            
            </td>

            

            

            <td class="description last">
                the edited RelationshipSet for the
       entity
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;any></code></span>


    </dd>
</dl>


<div class="param-desc">
    a promise which resolves to a {BBID: RelationshipSet}
         map
</div>

    
</div>



</div>
        
    

    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Mon Mar 03 2025 15:32:29 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>